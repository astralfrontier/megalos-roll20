mixin outcome(label, text)
  p
    span.sheet-rolltemplate-outcome-label= label
    span.sheet-rolltemplate-outcome-text= text

//- Usage: &{template:aether} {{name=Aether Current (1)}} {{roll=[[1d20]]}}

rolltemplate.sheet-rolltemplate-aether
  .sheet-rolltemplate-header
    h3= "{{name}}"
  .sheet-rolltemplate-outcome
    +outcome("Roll", "{{roll}}")
    +outcome("Message", "{{computed::message}}")
    //- p <strong>Invokers:</strong> EVEN=Astral ODD=Umbral
    //- p <strong>Witches:</strong> 1-4=Weak, 5-6=Surging

//- Usage: &{template:attack} {{name=Sword}} {{diff=[[0]]}} {{roll=[[1d20]]}} {{message=[[0]]}} {{damage=[[0]]}}

rolltemplate.sheet-rolltemplate-attack
  .sheet-rolltemplate-header
    h3= "{{name}}"
  .sheet-rolltemplate-outcome
    +outcome("Defense", "{{computed::diff}}")
    +outcome("Roll", "{{computed::roll}}")
    +outcome("Outcome", "{{computed::message}}")
    +outcome("Damage", "{{damage}}")

//- Usage: &{template:check} {{name=Attune}} {{diff=[[0]]}} {{roll=[[1d20]]}} {{message=[[0]]}}

rolltemplate.sheet-rolltemplate-check
  .sheet-rolltemplate-header
    h3= "{{name}}"
  .sheet-rolltemplate-outcome
    +outcome("Difficulty", "{{computed::diff}}")
    +outcome("Roll", "{{computed::roll}}")
    +outcome("Outcome", "{{computed::message}}")

//- Usage: &{template:save} {{name=WOUNDED(10)}} {{roll=[[1d20]]}}

rolltemplate.sheet-rolltemplate-save
  .sheet-rolltemplate-header
    h3= "{{name}}"
  .sheet-rolltemplate-outcome
    +outcome("Save", "{{computed::roll}}")
    +outcome("Outcome", "{{computed::message}}")

//- Usage: &{template:soak} {{name=Physical}} {{roll=[[1d6]]}} {{barrier=[[@{barrier}]]}}

rolltemplate.sheet-rolltemplate-soak
  .sheet-rolltemplate-header
    h3= "{{name}}"
  .sheet-rolltemplate-outcome
    +outcome("Soak", "{{roll}}")
    != "{{#rollGreater() barrier 0}}"
    +outcome("Barrier", "{{barrier}}")
    != "{{/rollGreater() barrier 0}}"

//- Usage: &{template:announce} {{name=Physical}} {{text=Some Text}}

rolltemplate.sheet-rolltemplate-announce
  .sheet-rolltemplate-header
    h3= "{{name}}"
  .sheet-rolltemplate-outcome
    != "{{#allprops() name text}}"
    +outcome('{{key}}', '{{value}}')
    != "{{/allprops() name text}}"
    p= "{{text}}"
